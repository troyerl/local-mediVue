(function(e){function t(t){for(var s,a,r=t[0],l=t[1],c=t[2],d=0,m=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&m.push(o[a][0]),o[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],s=!0,r=1;r<n.length;r++){var l=n[r];0!==o[l]&&(s=!1)}s&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var s={},o={app:0},i=[];function a(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=s,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var u=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0061":function(e,t,n){"use strict";var s=n("404c"),o=n.n(s);o.a},"404c":function(e,t,n){},4597:function(e,t,n){"use strict";var s=n("7f97"),o=n.n(s);o.a},"55de":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var s=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],a={name:"App"},r=a,l=n("2877"),c=Object(l["a"])(r,o,i,!1,null,null,null),u=c.exports,d=(n("f9e3"),n("2dd8"),n("5f5b")),m=n("b1e0"),f=n("e0ec"),p=n.n(f),v=n("2f62"),h=void 0;s["default"].use(v["a"]);var y=new v["a"].Store({state:{userInfo:null,message:null,showVideoPlayer:!0,playing:!1},mutations:{SOCKET_SEND_MESSAGE:function(e,t){e.message=t},SOCKET_TOGGLE_PLAYER:function(e,t){e.playing=t},togglePlayerView:function(e){e.showVideoPlayer=!e.showVideoPlayer},SOCKET_END_SESSION:function(e,t){console.log(t),e.playing=!1},SOCKET_UPDATE_USER:function(e,t){e.userInfo=t}},actions:{updateUserInfo:function(e){h.$socket.emit("UPDATE_USER",e)}}}),b=n("5132"),g=n.n(b),w=n("8c4f"),C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("form",{staticClass:"procedure-info",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("h4",{staticClass:"mb-0"},[e._v("Procedure Type:")]),n("div",{staticClass:"icon-list mt-3"},e._l(e.procedureTypes,(function(t){return n("div",{key:t.id,staticClass:"d-flex flex-column align-items-center"},[n("b-card",{staticClass:"shadow-sm procedure-card ml-2",on:{click:function(n){e.procedureSelect=t.id}}},[n("div",{class:(e.procedureSelect===t.id?"clicked":"")+" test1"},[n("img",{staticClass:"procedure-icon svg",attrs:{src:"assets/svg/"+(e.procedureSelect===t.id?"clicked-":"")+t.svg}})]),n("p",{staticClass:"mb-0 text-center"},[e._v(e._s(t.text))])])],1)})),0),n("hr"),n("h4",[e._v("Procedure Number:")]),n("div",{staticClass:"d-flex justify-content-center align-items-center align-content-center text-center"},[n("b-form-input",{staticClass:"w-25",attrs:{type:"number",required:"",placeholder:"Proc. #",min:"0"},model:{value:e.procedureNum,callback:function(t){e.procedureNum=t},expression:"procedureNum"}}),n("p",{staticClass:"mx-3 pt-3"},[e._v("out of")]),n("b-form-input",{staticClass:"w-25 text-center",attrs:{type:"number",required:"",placeholder:"Total Proc.",min:"0"},model:{value:e.totalProcedures,callback:function(t){e.totalProcedures=t},expression:"totalProcedures"}})],1),n("hr"),n("h4",[e._v("Select Playlist:")]),n("b-form-select",{staticClass:"w-50 mt-1 mb-5",attrs:{options:e.playlistList},model:{value:e.playlistSelect,callback:function(t){e.playlistSelect=t},expression:"playlistSelect"}}),n("div",{staticClass:"controls"},[n("div",{staticClass:"control-buttons"}),n("div",{staticClass:"control-buttons center-control"},[n("b-button",{staticClass:"start-session",attrs:{type:"submit"}},[n("b-icon-tv"),e._v(" Start Session")],1)],1),n("div",{staticClass:"control-buttons"})])],1)},P=[],_={name:"ProcedureInfo",data:function(){return{procedureSelect:null,procedureTypes:[{id:"head",svg:"head.svg",text:"Head"},{id:"chest",svg:"chest.svg",text:"Chest"},{id:"abdomen",svg:"abdomen.svg",text:"Abdomen"},{id:"extremeties",svg:"extremeties.svg",text:"Extremeties"},{id:"other",svg:"other.svg",text:"Other"}],playlistSelect:null,playlistList:[{value:null,text:"Please select a playlist"},{value:"superhero",text:"Superhero"},{value:"princess",text:"Princess"},{value:"twitch",text:"Twitch"},{value:"peppa the pig",text:"Peppa the Pig"},{value:"live news",text:"Live News"},{value:"other",text:"Other"}],procedureNum:null,totalProcedures:19,error:null}},methods:{onSubmit:function(){this.error=null,this.procedureSelect&&this.procedureTypes?(this.$socket.emit("UPDATE_USER",{playlist:[{url:"https://www.youtube.com/watch?v=3mMVcCMO_Ng"},{url:"https://www.youtube.com/watch?v=V-kT1oGCRCE"},{url:"https://www.youtube.com/watch?v=HJq3m-Ck2FI"}],procedureType:""}),this.$router.push({name:"missionControls"})):this.error="Missing required info to begin"}}},x=_,S=(n("8576"),Object(l["a"])(x,C,P,!1,null,null,null)),E=S.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-button",{directives:[{name:"show",rawName:"v-show",value:e.showVideoPlayer,expression:"showVideoPlayer"},{name:"b-modal",rawName:"v-b-modal.modal-1",modifiers:{"modal-1":!0}}],staticClass:"end-session-button",attrs:{variant:"danger"}},[e._v("End Session")]),n("adminVideoCamera"),n("b-modal",{staticClass:"text-center",attrs:{id:"modal-1",title:"End Session","hide-footer":"","hide-header":"",centered:""}},[n("div",{staticClass:"d-flex flex-column justify-content-center align-items-center"},[n("p",{staticClass:"my-4"},[e._v("Are you sure you want to end the session?")]),n("div",{staticClass:"d-flex justify-content-center w-100"},[n("b-button",{staticClass:"w-25 cancel-button mr-3",on:{click:function(t){return e.$bvModal.hide("modal-1")}}},[e._v("Cancel")]),n("b-button",{staticClass:"w-25",attrs:{variant:"danger"},on:{click:e.endSession}},[e._v("End")])],1)])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.showVideoPlayer,expression:"showVideoPlayer"}],staticClass:"video-container"},[n("VideoPlayer",{attrs:{mutePlayer:!0}})],1),e.showVideoPlayer?e._e():n("ControlMessages"),e.message?n("div",{staticClass:"d-flex w-100 align-items-center justify-content-center",staticStyle:{position:"fixed",bottom:"5rem"}},[n("div",{staticClass:"message d-flex align-content-center justify-content-center"},[n("p",{staticClass:"text-center"},[e._v(e._s(e.message))])])]):e._e(),n("div",{staticClass:"controls"},[n("div",{staticClass:"control-buttons",on:{click:e.toggleShowPlayer}},[e.showVideoPlayer?e._e():n("b-icon-chevron-double-left",{staticClass:"mr-2 mt-1"}),e._v(e._s(e.showVideoPlayer?"":"Controls"))],1),n("div",{staticClass:"control-buttons center-control",on:{click:e.centerControl}},[!e.playing&&e.showVideoPlayer?n("b-icon-play-fill",{staticClass:"mb-n1"}):e.playing&&e.showVideoPlayer?n("b-icon-pause-fill",{staticClass:"mb-n1"}):n("b-icon-chat-dots-fill",{staticClass:"mb-n1"}),e._v(e._s(e.showVideoPlayer?e.playPauseText:"Custom Message"))],1),n("div",{staticClass:"control-buttons",on:{click:e.toggleShowPlayer}},[e._v(e._s(e.showVideoPlayer?"Messages":"")+" "),e.showVideoPlayer?n("b-icon-chevron-double-right",{staticClass:"ml-2 mt-1"}):e._e()],1)])],1)},V=[],T=n("5530"),j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fullscreen"},[n("youtube",{ref:"youtube",attrs:{height:"100%","player-vars":e.playerVars,width:"100%"}})],1)},$=[],k=(n("d81d"),{name:"videoPlayer",props:["mutePlayer"],data:function(){return{firstTimePlayed:!0,videos:[],playerVars:{modestbranding:1,showinfo:0,autoplay:0,rel:0,constrols:0,disablekb:1,muted:!0}}},computed:Object(T["a"])(Object(T["a"])({},Object(v["b"])(["playing","userInfo"])),{},{player:function(){return this.$refs.youtube.player}}),mounted:function(){var e=this;this.mutePlayer&&this.player.mute(),this.$store.watch((function(e){return e.playing}),(function(t){t?e.playVideo():e.stopVideo()})),this.$store.watch((function(e){return e.userInfo}),(function(t){t&&e.initialize(t.playlist)}))},methods:{initialize:function(e){var t=this;this.firstTimePlayed=!0,this.videos=e.map((function(e){return t.getId(e.url)}))},playVideo:function(){this.firstTimePlayed&&(this.$refs.youtube.player.loadPlaylist(this.videos),this.$refs.youtube.player.setLoop(!0),this.firstTimePlayed=!1),this.player.playVideo()},stopVideo:function(){this.player.pauseVideo()},getId:function(e){return this.$youtube.getIdFromUrl(e)}}}),M=k,A=(n("4597"),Object(l["a"])(M,j,$,!1,null,"29ff335e",null)),I=A.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"control-messages"},e._l(e.defaultMessages,(function(t){return n("div",{key:t,staticClass:"message-container"},[n("button",{staticClass:"button",on:{click:e.setMessage}},[e._v(e._s(t))])])})),0)},D=[],U={name:"ControlMessages",data:function(){return{defaultMessages:["You are half-way done","Ten minutes remaining","Five minutes remaining","Hold your breath","You are doing great!","About 2 minutes remaining","You may breathe normally now","Your parents are proud of you!","Please do not move while we come into the room"]}},methods:{setMessage:function(e){var t=this;this.$socket.emit("SEND_MESSAGE",e.target.innerText),this.$store.commit("togglePlayerView"),setTimeout((function(){t.$socket.emit("SEND_MESSAGE",null)}),15e3)}}},R=U,L=(n("0061"),Object(l["a"])(R,N,D,!1,null,null,null)),G=L.exports,q=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},K=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"videoCamera"},[n("video",{attrs:{autoplay:"true",id:"videoElement"}})])}],Y={name:"adminVideoCamera",mounted:function(){var e=this;this.video=document.querySelector("#videoElement"),navigator.mediaDevices.getUserMedia({video:!0}).then((function(t){return e.video.srcObject=t}));var t=30;setInterval((function(){e.$socket.emit("CAMERA_DATA",e.getFrame())}),1e3/t)},data:function(){return{video:null}},methods:{getFrame:function(){var e=document.createElement("canvas");e.width=this.video.videoWidth,e.height=this.video.videoHeight,e.getContext("2d").drawImage(this.video,0,0);var t=e.toDataURL("image/png");return t}}},F=Y,H=(n("8946"),Object(l["a"])(F,q,K,!1,null,null,null)),J=H.exports,z={name:"MissionControls",components:{VideoPlayer:I,ControlMessages:G,adminVideoCamera:J},computed:Object(T["a"])(Object(T["a"])({},Object(v["b"])(["message","showVideoPlayer","playing"])),{},{playPauseText:function(){return this.playing?"Pause":"Play"}}),methods:{togglePlay:function(){this.$socket.emit("TOGGLE_PLAYER",!this.playing)},toggleShowPlayer:function(){this.$store.commit("togglePlayerView")},centerControl:function(){this.showVideoPlayer?this.togglePlay():console.log("controls")},endSession:function(){this.$socket.emit("UPDATE_USER",null),this.$socket.emit("END_SESSION",null),this.$router.push({name:"procedureInfo"})}}},B=z,W=(n("7500"),Object(l["a"])(B,O,V,!1,null,null,null)),Q=W.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"videoPlayer-container"},[n("videoPlayer",{attrs:{mutePlayer:!1}}),n("patientCameraView"),e.message?n("div",{staticClass:"d-flex w-100 align-items-center justify-content-center",staticStyle:{position:"fixed",bottom:"5rem"}},[n("div",{staticClass:"player-message d-flex align-content-center justify-content-center"},[n("p",{staticClass:"text-center"},[e._v(e._s(e.message))])])]):e._e()],1)},Z=[],ee=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},te=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"videoCamera"},[n("img",{attrs:{id:"videoElement",src:""}})])}],ne={name:"patientCameraView",mounted:function(){var e=document.querySelector("img");this.sockets.subscribe("CAMERA_DATA",(function(t){e.src=t}))}},se=ne,oe=Object(l["a"])(se,ee,te,!1,null,null,null),ie=oe.exports,ae={name:"videoPlayerContainer",props:{mutePlayer:Boolean},components:{videoPlayer:I,patientCameraView:ie},computed:Object(T["a"])({},Object(v["b"])(["message"]))},re=ae,le=(n("693c"),Object(l["a"])(re,X,Z,!1,null,null,null)),ce=le.exports,ue={procedureInfo:"/",missionControls:"/mission-controls",videoPlayer:"/videoplayer"};s["default"].use(w["a"]);var de=[{path:ue.procedureInfo,name:"procedureInfo",component:E},{path:ue.missionControls,name:"missionControls",component:Q},{path:ue.videoPlayer,name:"videoPlayerContainer",component:ce}],me=new w["a"]({routes:de}),fe=me;s["default"].use(d["a"]),s["default"].use(m["a"]),s["default"].use(p.a),s["default"].use(new g.a({debug:!0,connection:"http://localhost:5000/",vuex:{store:y,actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"}})),s["default"].config.productionTip=!1,new s["default"]({router:fe,store:y,render:function(e){return e(u)}}).$mount("#app")},"5f03":function(e,t,n){},"67d8":function(e,t,n){},"693c":function(e,t,n){"use strict";var s=n("5f03"),o=n.n(s);o.a},7500:function(e,t,n){"use strict";var s=n("55de"),o=n.n(s);o.a},"7c0e":function(e,t,n){},"7f97":function(e,t,n){},8576:function(e,t,n){"use strict";var s=n("7c0e"),o=n.n(s);o.a},8946:function(e,t,n){"use strict";var s=n("67d8"),o=n.n(s);o.a}});
//# sourceMappingURL=app.de548897.js.map